---
apiVersion: v1
kind: ConfigMap
metadata:
  name: logstash-pipelines
  namespace: observables
data:
  filter_main.conf: |-
    filter {
      grok {
          match => { "message" => "%{IPORHOST:remote_ip} - %{DATA:user_name} \[%{HTTPDATE:access_time}\] \"%{WORD:http_method} %{DATA:url} HTTP/%{NUMBER:http_version}\" %{NUMBER:response_code} %{NUMBER:body_sent_bytes} \"%{DATA:referrer}\" \"%{DATA:agent}\"" }
              }
    }
  input_main.conf: |-
    input {  
      beats {
        # The port to listen on for filebeat connections.
        port => 5044
        # The IP address to listen for filebeat connections.
        host => "0.0.0.0"
      }
    }
  output_main.conf: |-
    output {
      stdout { codec => rubydebug }
    }
    
